<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Valentine Escape</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <main class="shell">
    <div class="frame">

      <!-- TOP BAR -->
      <header class="topbar">
        <div class="brand">
          <div class="logo" aria-hidden="true"></div>
          <div>
            <div class="brandTitle">Valentine Escape</div>
            <div class="brandSub">Mission: unlock the surprise</div>
          </div>
        </div>

        <div class="hud">
          <div class="meter">
            <div class="meterTop">
              <span class="meterLabel">Progress</span>
              <span class="meterText" id="meterText">0 / 3</span>
            </div>
            <div class="meterBar" role="progressbar" aria-valuemin="0" aria-valuemax="3" aria-valuenow="0">
              <div class="meterFill" id="meterFill"></div>
            </div>
          </div>

          <div class="timer">
            <span class="timerLabel" id="timerLabel">Timer</span>
            <span class="timerValue" id="timerValue">00:00</span>
          </div>
        </div>
      </header>

      <!-- CONTENT -->
      <section class="card">

        <!-- HOME -->
        <section id="home" class="section active" aria-labelledby="homeTitle">
          <h1 id="homeTitle">A tiny escape room‚Ä¶ made for you üíò</h1>
          <p class="sub">
            Solve rooms, type codes, and unlock for the final surprise.
          </p>

          <div class="callout">
            <div class="calloutTitle">Rules</div>
            <ul class="rules">
              <li>One room at a time.</li>
              <li>Timer starts when you enter a room.</li>
            </ul>
          </div>

          <div class="actions">
            <button class="btn primary" id="startBtn" type="button">Start Room 1</button>
          </div>

        </section>

        <!-- ROOM 1 -->
        <section id="room1" class="section" aria-labelledby="r1Title">
          <div class="sectionHead">
            <div>
              <div class="kicker">Room 1</div>
              <h2 id="r1Title">Our Timeline</h2>
              <p class="sub">
                Drag the 10 moments into order (earliest ‚Üí latest), then type the generated code to unlock.
              </p>
            </div>
            <button class="btn ghost" id="backHomeBtn" type="button">Back</button>
          </div>

          <div class="grid2">
            <div>
              <ol id="timelineList" class="timeline" aria-label="Draggable timeline list"></ol>

              <div class="row">
                <button id="r1CheckBtn" class="btn primary" type="button">Check order</button>
                <button id="r1ShuffleBtn" class="btn" type="button">New shuffle</button>
                <button id="r1ResetBtn" class="btn ghost" type="button">Reset</button>
              </div>

              <div id="r1Feedback" class="feedback" role="status" aria-live="polite"></div>
            </div>

            <div class="panel">
              <div class="panelTitle">Lock Console</div>
              <p class="sub">Solve the room to reveal a code. Type it to unlock.</p>

              <div class="lock">
                <div class="lockTop">
                  <div class="lockIcon" id="r1LockIcon" aria-hidden="true"></div>
                  <div>
                    <div class="lockLabel">Room 1 Code</div>
                    <div class="tiny muted" id="r1CodeHint">Solve the timeline to reveal.</div>
                  </div>
                </div>

                <div class="codeReveal">
                  <div class="tiny muted">Generated code</div>
                  <div class="code" id="r1CodeDisplay">‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</div>
                </div>

                <div class="codeEntry">
                  <input
                    id="r1CodeInput"
                    class="input"
                    inputmode="numeric"
                    autocomplete="one-time-code"
                    placeholder="Enter 10-digit code"
                    maxlength="10"
                    aria-label="Enter room 1 code"
                    disabled
                  />
                  <button id="r1UnlockBtn" class="btn primary" type="button" disabled>Unlock</button>
                </div>

                <div id="r1UnlockMsg" class="tiny muted"></div>
              </div>
            </div>
          </div>
        </section>

        <!-- ROOM 2 -->
        <section id="room2" class="section" aria-labelledby="r2Title">
          <div class="sectionHead">
            <div>
              <div class="kicker">Room 2</div>
              <h2 id="r2Title">Word Search</h2>
              <p class="sub">
                Drag across letters to select a word. Find them all to reveal a code, then type it to unlock.
              </p>
            </div>
            <button class="btn ghost" id="backR1Btn" type="button">Back</button>
          </div>

          <div class="grid2">
            <div class="panel">
              <div class="panelTitle">Words to find</div>
              <ul id="wordList" class="wordList"></ul>

              <div class="divider soft"></div>

              <div class="row">
                <button id="r2NewBtn" class="btn" type="button">New puzzle</button>
                <button id="r2ClearBtn" class="btn ghost" type="button">Clear selection</button>
              </div>

              <div id="r2Feedback" class="feedback" role="status" aria-live="polite"></div>

              <div class="lock">
                <div class="lockTop">
                  <div class="lockIcon" id="r2LockIcon" aria-hidden="true"></div>
                  <div>
                    <div class="lockLabel">Exit Door</div>
                    <div class="tiny muted" id="r2Hint">Find all words to reveal the code.</div>
                  </div>
                </div>

                <div class="codeReveal">
                  <div class="tiny muted">Generated code</div>
                  <div class="code" id="r2CodeDisplay">‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</div>
                </div>

                <div class="codeEntry">
                  <input
                    id="r2CodeInput"
                    class="input"
                    autocomplete="one-time-code"
                    placeholder="Enter code"
                    maxlength="8"
                    aria-label="Enter room 2 code"
                    disabled
                  />
                  <button id="r2UnlockBtn" class="btn primary" type="button" disabled>Unlock</button>
                </div>

                <div id="r2UnlockMsg" class="tiny muted"></div>
              </div>
            </div>

            <div class="wsWrap">
              <div class="wsGrid" id="wsGrid" aria-label="Word search grid"></div>
            </div>
          </div>
        </section>

        <!-- ROOM 3: MAP -->
        <section id="room3" class="section" aria-labelledby="r3Title">
          <div class="sectionHead">
            <div>
              <div class="kicker">Room 3</div>
              <h2 id="r3Title">Bay Area Pin Drop</h2>
              <p class="sub">
                I‚Äôll give you a location. Click where you think it is on this Bay Area map.
                5 correct pins unlock the door.
              </p>
            </div>
            <button class="btn ghost" id="backR2Btn" type="button">Back</button>
          </div>

          <div class="grid2">
            <div class="panel">
              <div class="panelTitle">Prompt</div>

              <div class="promptBox">
                <div class="tiny muted">Find this location:</div>
                <div class="promptName" id="mapPrompt">‚Äî</div>
                <div class="tiny muted" id="mapSubhint">Click the map to place your guess.</div>
              </div>

              <div class="divider soft"></div>

              <div class="panelTitle">Progress</div>
              <div class="chipRow" id="mapChips"></div>

              <div id="r3Feedback" class="feedback" role="status" aria-live="polite"></div>

              <div class="lock">
                <div class="lockTop">
                  <div class="lockIcon" id="r3LockIcon" aria-hidden="true"></div>
                  <div>
                    <div class="lockLabel">Exit Door</div>
                    <div class="tiny muted" id="r3Hint">Pin all 5 locations to reveal the code.</div>
                  </div>
                </div>

                <div class="codeReveal">
                  <div class="tiny muted">Generated code</div>
                  <div class="code" id="r3CodeDisplay">‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</div>
                </div>

                <div class="codeEntry">
                  <input
                    id="r3CodeInput"
                    class="input"
                    autocomplete="one-time-code"
                    placeholder="Enter code"
                    maxlength="8"
                    aria-label="Enter room 3 code"
                    disabled
                  />
                  <button id="r3UnlockBtn" class="btn primary" type="button" disabled>Unlock</button>
                </div>

                <div id="r3UnlockMsg" class="tiny muted"></div>
              </div>
            </div>

            <div class="wsWrap mapWrap">
              <div class="mapStage">
                <svg id="bayMap" viewBox="0 0 600 520" class="baySvg" aria-label="Bay Area map (no labels)">
                  <!-- Ocean background -->
                  <rect x="0" y="0" width="600" height="520" fill="rgba(255,255,255,.02)"></rect>

                  <!-- Landmass (stylized Bay Area + Peninsula shape) -->
                  <path class="land"
                    d="
                      M120,80
                      C160,40 240,35 300,55
                      C350,70 380,95 410,120
                      C450,155 510,210 520,270
                      C530,335 505,405 460,445
                      C415,485 350,505 285,495
                      C235,488 210,468 190,445
                      C165,415 150,380 145,330
                      C140,285 150,250 160,220
                      C180,165 165,135 140,110
                      C125,95 115,90 120,80
                      Z
                    " />

                  <!-- SF Bay water cutout -->
                  <path class="bay"
                    d="
                      M255,145
                      C285,125 320,130 345,150
                      C365,165 375,190 370,220
                      C363,260 330,285 295,280
                      C265,275 245,250 240,220
                      C232,185 235,160 255,145
                      Z
                    " />

                  <!-- South Bay extension -->
                  <path class="bay"
                    d="
                      M310,275
                      C345,285 365,315 365,345
                      C365,385 330,405 300,395
                      C275,387 260,365 260,340
                      C260,305 280,270 310,275
                      Z
                    " />

                  <!-- Coastline guide -->
                  <path class="coast"
                    d="M150,120 C200,160 210,220 200,280 C190,350 215,420 275,465"
                  />
                  <path class="coast"
                    d="M410,125 C470,175 500,235 505,285 C510,345 475,420 420,455"
                  />

                  <!-- click layer -->
                  <rect x="0" y="0" width="600" height="520" class="hit" />

                  <!-- user guess marker -->
                  <circle id="guessDot" cx="-10" cy="-10" r="10" class="guessDot" />

                  <!-- confirmed pins -->
                  <g id="pins"></g>
                </svg>
              </div>
              <p class="tiny muted" style="margin:10px 2px 0;">Tip: no labels ‚Äî trust the Bay Area vibes.</p>
            </div>
          </div>
        </section>

        <!-- ROOM 4: FINAL REVEAL -->
        <section id="room4" class="section" aria-labelledby="r4Title">
          <div class="sectionHead">
            <div>
              <div class="kicker">Finale</div>
              <h2 id="r4Title">Happy Valentine‚Äôs Day ‚ù§Ô∏è</h2>
              <p class="sub">You did it. Now claim your prize.</p>
            </div>
            <button class="btn ghost" id="backR3Btn" type="button">Back</button>
          </div>

          <div class="callout">
            <div class="calloutTitle">Tonight‚Äôs Menu</div>
            <p class="sub">A little something I put together for us ü•Ç</p>
          </div>

          <div class="menuWrap">
            <img src="menu.jpeg" class="menuImg" alt="Valentine's Menu">
          </div>
        </section>

      </section>
    </div>
  </main>

  <!-- Full-screen unlock overlay (shared across rooms) -->
  <div class="unlockOverlay hidden" id="unlockOverlay" aria-hidden="true">
    <div class="unlockModal">
      <div class="unlockBadge">UNLOCKED</div>
      <div class="unlockTitle" id="unlockTitle">Door unlocked</div>
      <div class="unlockSub" id="unlockSub">Entering the next room‚Ä¶</div>

      <div class="unlockBigFx" id="unlockBigFx" aria-hidden="true">
        <div class="fxRing"></div>
        <div class="fxSpark fx1"></div>
        <div class="fxSpark fx2"></div>
        <div class="fxSpark fx3"></div>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
