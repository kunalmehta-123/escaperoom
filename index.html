<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Valentine Escape</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <main class="shell">
    <div class="frame">

      <!-- TOP BAR -->
      <header class="topbar">
        <div class="brand">
          <div class="logo" aria-hidden="true"></div>
          <div>
            <div class="brandTitle">Valentine Escape</div>
            <div class="brandSub">Mission: unlock the surprise</div>
          </div>
        </div>

        <div class="hud">
          <div class="meter">
            <div class="meterTop">
              <span class="meterLabel">Progress</span>
              <span class="meterText" id="meterText">0 / 3</span>
            </div>
            <div class="meterBar" role="progressbar" aria-valuemin="0" aria-valuemax="3" aria-valuenow="0">
              <div class="meterFill" id="meterFill"></div>
            </div>
          </div>

          <div class="timer">
            <span class="timerLabel" id="timerLabel">Timer</span>
            <span class="timerValue" id="timerValue">00:00</span>
          </div>
        </div>
      </header>

      <!-- CONTENT -->
      <section class="card">

        <!-- HOME -->
        <section id="home" class="section active" aria-labelledby="homeTitle">
          <h1 id="homeTitle">A tiny escape room‚Ä¶ made for you üíò</h1>
          <p class="sub">
            Solve rooms, type codes, and unlock the final surprise.
            Smooth. Modern. Slightly evil.
          </p>

          <div class="callout">
            <div class="calloutTitle">Rules</div>
            <ul class="rules">
              <li>One room at a time.</li>
              <li>Timer starts when you enter a room.</li>
              <li>Winning is mandatory.</li>
            </ul>
          </div>

          <div class="actions">
            <button class="btn primary" id="startBtn" type="button">Start Room 1</button>
          </div>

          <p class="tiny muted">Best on desktop (drag + word search + map). Mobile still works.</p>
        </section>

        <!-- ROOM 1 -->
        <section id="room1" class="section" aria-labelledby="r1Title">
          <div class="sectionHead">
            <div>
              <div class="kicker">Room 1</div>
              <h2 id="r1Title">Our Timeline</h2>
              <p class="sub">
                Drag the 10 moments into order (earliest ‚Üí latest), then type the generated code to unlock.
              </p>
            </div>
            <button class="btn ghost" id="backHomeBtn" type="button">Back</button>
          </div>

          <div class="grid2">
            <div>
              <ol id="timelineList" class="timeline" aria-label="Draggable timeline list"></ol>

              <div class="row">
                <button id="r1CheckBtn" class="btn primary" type="button">Check order</button>
                <button id="r1ShuffleBtn" class="btn" type="button">New shuffle</button>
                <button id="r1ResetBtn" class="btn ghost" type="button">Reset</button>
              </div>

              <div id="r1Feedback" class="feedback" role="status" aria-live="polite"></div>
            </div>

            <div class="panel">
              <div class="panelTitle">Lock Console</div>
              <p class="sub">Solve the room to reveal a code. Type it to unlock.</p>

              <div class="lock">
                <div class="lockTop">
                  <div class="lockIcon" id="r1LockIcon" aria-hidden="true"></div>
                  <div>
                    <div class="lockLabel">Room 1 Code</div>
                    <div class="tiny muted" id="r1CodeHint">Solve the timeline to reveal.</div>
                  </div>
                </div>

                <div class="codeReveal">
                  <div class="tiny muted">Generated code</div>
                  <div class="code" id="r1CodeDisplay">‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</div>
                </div>

                <div class="codeEntry">
                  <input
                    id="r1CodeInput"
                    class="input"
                    inputmode="numeric"
                    autocomplete="one-time-code"
                    placeholder="Enter 10-digit code"
                    maxlength="10"
                    aria-label="Enter room 1 code"
                    disabled
                  />
                  <button id="r1UnlockBtn" class="btn primary" type="button" disabled>Unlock</button>
                </div>

                <div id="r1UnlockMsg" class="tiny muted"></div>
              </div>
            </div>
          </div>
        </section>

        <!-- ROOM 2 -->
        <section id="room2" class="section" aria-labelledby="r2Title">
          <div class="sectionHead">
            <div>
              <div class="kicker">Room 2</div>
              <h2 id="r2Title">Word Search</h2>
              <p class="sub">
                Drag across letters to select a word. Find them all to reveal a code, then type it to unlock.
              </p>
            </div>
            <button class="btn ghost" id="backR1Btn" type="button">Back</button>
          </div>

          <div class="grid2">
            <div class="panel">
              <div class="panelTitle">Words to find</div>
              <ul id="wordList" class="wordList"></ul>

              <div class="divider soft"></div>

              <div class="row">
                <button id="r2NewBtn" class="btn" type="button">New puzzle</button>
                <button id="r2ClearBtn" class="btn ghost" type="button">Clear selection</button>
              </div>

              <div id="r2Feedback" class="feedback" role="status" aria-live="polite"></div>

              <div class="lock">
                <div class="lockTop">
                  <div class="lockIcon" id="r2LockIcon" aria-hidden="true"></div>
                  <div>
                    <div class="lockLabel">Exit Door</div>
                    <div class="tiny muted" id="r2Hint">Find all words to reveal the code.</div>
                  </div>
                </div>

                <div class="codeReveal">
                  <div class="tiny muted">Generated code</div>
                  <div class="code" id="r2CodeDisplay">‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</div>
                </div>

                <div class="codeEntry">
                  <input
                    id="r2CodeInput"
                    class="input"
                    autocomplete="one-time-code"
                    placeholder="Enter code"
                    maxlength="8"
                    aria-label="Enter room 2 code"
                    disabled
                  />
                  <button id="r2UnlockBtn" class="btn primary" type="button" disabled>Unlock</button>
                </div>

                <div id="r2UnlockMsg" class="tiny muted"></div>
              </div>
            </div>

            <div class="wsWrap">
              <div class="wsGrid" id="wsGrid" aria-label="Word search grid"></div>
            </div>
          </div>
        </section>

        <!-- ROOM 3: MAP -->
        <section id="room3" class="section" aria-labelledby="r3Title">
          <div class="sectionHead">
            <div>
              <div class="kicker">Room 3</div>
              <h2 id="r3Title">Bay Area Pin Drop</h2>
              <p class="sub">
                I‚Äôll give you a location. Click where you think it is on this unlabeled Bay Area map.
                5 correct pins unlock the final door.
              </p>
            </div>
            <button class="btn ghost" id="backR2Btn" type="button">Back</button>
          </div>

          <div class="grid2">
            <div class="panel">
              <div class="panelTitle">Prompt</div>

              <div class="promptBox">
                <div class="tiny muted">Find this location:</div>
                <div class="promptName" id="mapPrompt">‚Äî</div>
                <div class="tiny muted" id="mapSubhint">Click the map to place your guess.</div>
              </div>

              <div class="divider soft"></div>

              <div class="panelTitle">Progress</div>
              <div class="chipRow" id="mapChips"></div>

              <div id="r3Feedback" class="feedback" role="status" aria-live="polite"></div>

              <div class="lock">
                <div class="lockTop">
                  <div class="lockIcon" id="r3LockIcon" aria-hidden="true"></div>
                  <div>
                    <div class="lockLabel">Final Door</div>
                    <div class="tiny muted" id="r3Hint">Pin all 5 locations to reveal the code.</div>
                  </div>
                </div>

                <div class="codeReveal">
                  <div class="tiny muted">Generated code</div>
                  <div class="code" id="r3CodeDisplay">‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</div>
                </div>

                <div class="codeEntry">
                  <input
                    id="r3CodeInput"
                    class="input"
                    autocomplete="one-time-code"
                    placeholder="Enter code"
                    maxlength="8"
                    aria-label="Enter room 3 code"
                    disabled
                  />
                  <button id="r3UnlockBtn" class="btn primary" type="button" disabled>Unlock</button>
                </div>

                <div id="r3UnlockMsg" class="tiny muted"></div>
              </div>
            </div>

            <div class="wsWrap mapWrap">
              <div class="mapStage">
                <!-- More detailed Bay Area-ish outline (still no labels) -->
                <svg id="bayMap" viewBox="0 0 820 560" class="baySvg" aria-label="Unlabeled Bay Area map">
                  <!-- ocean background -->
                  <rect x="0" y="0" width="820" height="560" class="ocean" />

                  <!-- land -->
                  <path class="land"
                    d="M110,80
                       C145,50 220,35 290,45
                       C360,55 410,70 450,92
                       C480,108 520,130 560,160
                       C610,198 650,250 665,305
                       C680,360 665,410 630,455
                       C585,510 520,535 445,535
                       C365,535 295,520 240,490
                       C190,463 160,430 145,390
                       C120,325 95,290 85,245
                       C70,175 85,115 110,80 Z" />

                  <!-- bay water cutouts (bigger + more recognizable) -->
                  <path class="bay"
                    d="M365,120
                       C415,120 455,150 468,190
                       C480,228 465,270 430,298
                       C400,322 360,330 335,310
                       C305,285 300,250 312,212
                       C328,160 332,120 365,120 Z" />

                  <path class="bay"
                    d="M430,300
                       C470,295 510,318 520,352
                       C532,395 505,430 460,435
                       C420,440 395,410 398,372
                       C401,332 405,306 430,300 Z" />

                  <!-- coastline stroke for crispness -->
                  <path class="coast"
                    d="M130,120
                       C165,160 190,210 185,265
                       C178,345 210,425 285,480
                       C360,535 470,545 555,520" />

                  <!-- click layer -->
                  <rect x="0" y="0" width="820" height="560" class="hit" />

                  <!-- user guess marker -->
                  <circle id="guessDot" cx="-10" cy="-10" r="10" class="guessDot" />

                  <!-- confirmed pins -->
                  <g id="pins"></g>
                </svg>
              </div>
              <p class="tiny muted" style="margin:10px 2px 0;">No labels. Just vibes. üß≠</p>
            </div>
          </div>
        </section>

        <!-- FINAL: VALENTINE -->
        <section id="room4" class="section" aria-labelledby="r4Title">
          <div class="sectionHead">
            <div>
              <div class="kicker">Complete</div>
              <h2 id="r4Title">Happy Valentine‚Äôs Day ‚ù§Ô∏è</h2>
              <p class="sub">
                You escaped. You won. You‚Äôre the greatest.
              </p>
            </div>
            <button class="btn ghost" id="backR3Btn" type="button">Back</button>
          </div>

          <div class="callout">
            <div class="calloutTitle">Tonight‚Äôs Menu</div>
            <p class="sub">A proper endgame.</p>
          </div>

          <!-- Put your uploaded image into the repo as: menu.jpg -->
          <div class="menuWrap">
            <img class="menuImg" src="menu.jpg" alt="Valentine's Day Menu" />
          </div>

          <div class="actions" style="margin-top:14px;">
            <button class="btn" id="restartBtn" type="button">Restart</button>
          </div>
        </section>

      </section>
    </div>
  </main>

  <!-- Full-screen unlock overlay (shared across rooms) -->
  <div class="unlockOverlay hidden" id="unlockOverlay" aria-hidden="true">
    <div class="unlockModal">
      <div class="unlockBadge">UNLOCKED</div>
      <div class="unlockTitle" id="unlockTitle">Door unlocked</div>
      <div class="unlockSub" id="unlockSub">Entering the next room‚Ä¶</div>

      <div class="unlockBigFx" id="unlockBigFx" aria-hidden="true">
        <div class="fxRing"></div>
        <div class="fxSpark fx1"></div>
        <div class="fxSpark fx2"></div>
        <div class="fxSpark fx3"></div>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
